# PyTorch图模式使用指南（TorchAir）

-   [简介](context/简介.md)
-   [安装](context/安装.md)
-   [快速上手](context/快速上手.md)
-   [基础功能](context/基础功能.md)
    -   [日志功能](context/日志功能.md)
        -   [TorchAir Python层日志](context/TorchAir-Python层日志.md)
        -   [TorchAir C++层日志](context/TorchAir-C++层日志.md)

    -   [集合通信入图](context/集合通信入图.md)
    -   [图结构dump功能](context/图结构dump功能.md)
    -   [算子输入输出dump功能（Eager模式）](context/算子输入输出dump功能（Eager模式）.md)
    -   [图编译完整Debug信息保存功能](context/图编译完整Debug信息保存功能.md)
    -   [run-eagerly功能](context/run-eagerly功能.md)
    -   [冗余算子消除功能](context/冗余算子消除功能.md)
    -   [FX图算子融合Pass配置](context/FX图算子融合Pass配置.md)
    -   [自定义FX图Pass功能](context/自定义FX图Pass功能.md)
    -   [图内AI Core和Vector Core算子级核数配置](context/图内AI-Core和Vector-Core算子级核数配置.md)

-   [reduce-overhead模式功能](context/reduce-overhead模式功能.md)
    -   [reduce-overhead模式配置](context/reduce-overhead模式配置.md)
    -   [FX Pass配置功能](context/FX-Pass配置功能.md)
    -   [模型编译缓存功能（aclgraph）](context/模型编译缓存功能（aclgraph）.md)
    -   [图内多流表达功能（aclgraph）](context/图内多流表达功能（aclgraph）.md)
    -   [aclgraph间内存复用功能](context/aclgraph间内存复用功能.md)
    -   [静态Kernel编译配置](context/静态Kernel编译配置.md)
    -   [固定权重类输入地址功能（aclgraph）](context/固定权重类输入地址功能（aclgraph）.md)
    -   [重捕获次数限制功能（aclgraph）](context/重捕获次数限制功能（aclgraph）.md)

-   [max-autotune模式功能](context/max-autotune模式功能.md)
    -   [Dynamo导图功能](context/Dynamo导图功能.md)
    -   [模型编译缓存功能（Ascend IR）](context/模型编译缓存功能（Ascend-IR）.md)
    -   [图内Tensor打印功能](context/图内Tensor打印功能.md)
    -   [图内多流表达功能（Ascend IR）](context/图内多流表达功能（Ascend-IR）.md)
    -   [算子Converter支持度导出功能](context/算子Converter支持度导出功能.md)
    -   [算子输入输出dump功能（图模式）](context/算子输入输出dump功能（图模式）.md)
    -   [动态shape图分档执行功能](context/动态shape图分档执行功能.md)
    -   [图编译统计信息导出功能](context/图编译统计信息导出功能.md)
    -   [图单流执行功能](context/图单流执行功能.md)
    -   [图编译多级优化选项](context/图编译多级优化选项.md)
    -   [算子融合规则配置功能（fusion\_switch\_file）](context/算子融合规则配置功能（fusion_switch_file）.md)
    -   [算子融合规则配置功能（optimization\_switch）](context/算子融合规则配置功能（optimization_switch）.md)
    -   [固定权重类输入地址功能（Ascend IR）](context/固定权重类输入地址功能（Ascend-IR）.md)
    -   [图模式编译节点遍历选项](context/图模式编译节点遍历选项.md)
    -   [计算与通信并行功能](context/计算与通信并行功能.md)
    -   [算子在线编译选项](context/算子在线编译选项.md)
    -   [RefData类型转换功能](context/RefData类型转换功能.md)
    -   [Tiling调度优化功能](context/Tiling调度优化功能.md)
    -   [View类算子优化功能](context/View类算子优化功能.md)
    -   [动静子图拆分场景性能优化](context/动静子图拆分场景性能优化.md)
    -   [图内标定SuperKernel范围](context/图内标定SuperKernel范围.md)
    -   [图内AI Core和Vector Core全局核数配置](context/图内AI-Core和Vector-Core全局核数配置.md)
    -   [图内算子不超时配置功能](context/图内算子不超时配置功能.md)

-   [支持的ATen API清单](context/支持的ATen-API清单.md)
-   [自定义算子入图](context/自定义算子入图.md)
    -   [概述](context/概述.md)
    -   [环境准备](context/环境准备.md)
    -   [算子开发和适配TorchAir图模式](context/算子开发和适配TorchAir图模式.md)
        -   [In-place算子开发和入图样例](context/In-place算子开发和入图样例.md)
            -   [确定算子原型](context/确定算子原型.md)
            -   [算子NPU实现（Ascend C）](context/算子NPU实现（Ascend-C）.md)
            -   [注册并适配Eager模式](context/注册并适配Eager模式.md)
            -   [实现Meta推导函数](context/实现Meta推导函数.md)
            -   [实现函数化转换](context/实现函数化转换.md)
            -   [实现Converter（可选）](context/实现Converter（可选）.md)
            -   [功能验证](context/功能验证.md)
            -   [样例总结](context/样例总结.md)

        -   [非In-place算子开发和入图样例](context/非In-place算子开发和入图样例.md)
            -   [确定算子原型](context/确定算子原型-0.md)
            -   [算子NPU实现（Ascend C）](context/算子NPU实现（Ascend-C）-1.md)
            -   [注册并适配Eager模式](context/注册并适配Eager模式-2.md)
            -   [实现Meta推导函数](context/实现Meta推导函数-3.md)
            -   [实现Converter（可选）](context/实现Converter（可选）-4.md)
            -   [功能验证](context/功能验证-5.md)
            -   [样例总结](context/样例总结-6.md)

    -   [算子插件化适配TorchAir图模式](context/算子插件化适配TorchAir图模式.md)
        -   [非In-place算子插件化入图样例](context/非In-place算子插件化入图样例.md)
        -   [In-place算子插件化入图样例](context/In-place算子插件化入图样例.md)

-   [API参考](context/API参考.md)
    -   [整体说明](context/整体说明.md)
    -   [torchair](context/torchair.md)
        -   [CompilerConfig类](context/CompilerConfig类.md)
        -   [dynamo\_export](context/dynamo_export.md)
        -   [get\_compiler](context/get_compiler.md)
        -   [get\_npu\_backend](context/get_npu_backend.md)
        -   [use\_internal\_format\_weight](context/use_internal_format_weight.md)
        -   [register\_fx\_node\_ge\_converter](context/register_fx_node_ge_converter.md)
        -   [patch\_for\_hcom](context/patch_for_hcom.md)
        -   [register\_replacement](context/register_replacement.md)

    -   [torchair.ge](context/torchair-ge.md)
        -   [DataType类](context/DataType类.md)
        -   [Format类](context/Format类.md)
        -   [Tensor类](context/Tensor类.md)
        -   [TensorSpec类](context/TensorSpec类.md)
        -   [Const](context/Const.md)
        -   [Cast](context/Cast.md)
        -   [Clone](context/Clone.md)
        -   [custom\_op](context/custom_op.md)

    -   [torchair.inference](context/torchair-inference.md)
        -   [cache\_compile](context/cache_compile.md)
        -   [readable\_cache](context/readable_cache.md)
        -   [set\_dim\_gears](context/set_dim_gears.md)

    -   [torchair.ops](context/torchair-ops.md)
        -   [npu\_print](context/npu_print.md)
        -   [npu\_fused\_infer\_attention\_score](context/npu_fused_infer_attention_score.md)
        -   [npu\_fused\_infer\_attention\_score\_v2](context/npu_fused_infer_attention_score_v2.md)
        -   [npu\_create\_tagged\_event](context/npu_create_tagged_event.md)
        -   [npu\_tagged\_event\_record](context/npu_tagged_event_record.md)
        -   [npu\_tagged\_event\_wait](context/npu_tagged_event_wait.md)
        -   [npu\_record\_tagged\_stream](context/npu_record_tagged_stream.md)
        -   [record](context/record.md)
        -   [wait](context/wait.md)

    -   [torchair.scope](context/torchair-scope.md)
        -   [npu\_stream\_switch](context/npu_stream_switch.md)
        -   [npu\_wait\_tensor](context/npu_wait_tensor.md)
        -   [super\_kernel](context/super_kernel.md)
        -   [limit\_core\_num](context/limit_core_num.md)
        -   [op\_never\_timeout](context/op_never_timeout.md)

    -   [torchair.llm\_datadist](context/torchair-llm_datadist.md)
        -   [create\_npu\_tensors](context/create_npu_tensors.md)

-   [常见案例和定位方法](context/常见案例和定位方法.md)
    -   [大模型图模式推理案例](context/大模型图模式推理案例.md)
    -   [动/静态图概念及典型问题定位](context/动-静态图概念及典型问题定位.md)
        -   [背景介绍](context/背景介绍.md)
            -   [编译流程简介](context/编译流程简介.md)
            -   [TorchAir与GE交互流程](context/TorchAir与GE交互流程.md)

        -   [动/静态图概念](context/动-静态图概念.md)
            -   [Dynamo中动/静态图概念](context/Dynamo中动-静态图概念.md)
            -   [GE动/静态图概念](context/GE动-静态图概念.md)

        -   [动/静态图展示](context/动-静态图展示.md)
            -   [Dynamo动/静态图展示](context/Dynamo动-静态图展示.md)
            -   [GE动/静态图展示](context/GE动-静态图展示.md)

        -   [典型问题](context/典型问题.md)
            -   [模型中存在FA算子，如何执行整图静态下沉调度](context/模型中存在FA算子-如何执行整图静态下沉调度.md)

    -   [入图失败定界与定位](context/入图失败定界与定位.md)
        -   [定界与定位流程](context/定界与定位流程.md)
        -   [定界与定位案例](context/定界与定位案例.md)
            -   [整网运行报错“op dtype is not same”](context/整网运行报错-op-dtype-is-not-same.md)
            -   [自定义算子入图报错“Check output size failed”](context/自定义算子入图报错-Check-output-size-failed.md)
            -   [自定义算子入图Meta注册报错“tensor's device must be 'meta', got xxx instead”](context/自定义算子入图Meta注册报错-tensor-s-device-must-be-meta-got-xxx-instead.md)
            -   [开启固定权重类输入地址功能后出现精度问题](context/开启固定权重类输入地址功能后出现精度问题.md)
            -   [图编译报错“it should be less than input shape size xxx”](context/图编译报错-it-should-be-less-than-input-shape-size-xxx.md)
            -   [运行时报错“torch.xxx ge\_converter is not implemented!”](context/运行时报错-torch-xxx-ge_converter-is-not-implemented.md)
            -   [自定义算子入图报错“unsupported operator”](context/自定义算子入图报错-unsupported-operator.md)
            -   [自定义算子入图报错“Found a custom \(non-ATen\) operator”](context/自定义算子入图报错-Found-a-custom-(non-ATen)-operator.md)
            -   [自定义算子入图报错“torch.\_C.\_dispatch\_tls\_local\_exclude\_set”](context/自定义算子入图报错-torch-_C-_dispatch_tls_local_exclude_set.md)

    -   [图模式精度比对](context/图模式精度比对.md)
        -   [精度比对流程](context/精度比对流程.md)
        -   [精度比对案例](context/精度比对案例.md)

    -   [图模式性能分析](context/图模式性能分析.md)
        -   [性能分析流程](context/性能分析流程.md)
        -   [性能分析案例](context/性能分析案例.md)

    -   [FAQ](context/FAQ.md)
        -   [本地编译失败，报错libboundscheck等库下载失败](context/本地编译失败-报错libboundscheck等库下载失败.md)
        -   [运行时遇到报错“CHECK failed: GeneratedDatabase\(\)-\>Add\(encoded\_file\_descriptor, size\)”](context/运行时遇到报错-CHECK-failed-GeneratedDatabase()--Add(encoded_file_descriptor-size).md)

-   [附录](context/附录.md)
    -   [AI Core/Cube Core/Vector Core简介](context/AI-Core-Cube-Core-Vector-Core简介.md)

