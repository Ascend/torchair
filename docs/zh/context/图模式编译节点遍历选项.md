# 图模式编译节点遍历选项

## 功能简介

图模式下算子编译时，可以设置不同的图遍历模式，对静态图内存使用有不同的影响。用户根据实际情况自行设置。

该功能主要面向推理场景。

## 使用约束

本功能仅支持max-autotune模式。

## 使用方法

该功能通过[torchair.get\_npu\_backend](get_npu_backend.md)中compiler\_config配置，示例如下，仅供参考不支持直接拷贝运行，参数介绍参见下表。

```python
import torch_npu
import torchair 
config = torchair.CompilerConfig()
# 图模式编译的遍历策略配置
config.experimental_config.topology_sorting_strategy = "DFS"
npu_backend = torchair.get_npu_backend(compiler_config=config)
opt_model = torch.compile(model, backend=npu_backend)
```

**表 1**  参数说明


| 参数名 | 说明 |
| --- | --- |
| topology_sorting_strategy | 图执行时可以设置不同的图遍历顺序。<br>- DFS（默认值）：Depth First Search，深度优先遍历策略。<br>- BFS：Breadth First Search，广度优先遍历策略。<br>- RDFS：Reverse DFS，反向深度优先遍历策略。<br>- StableRDFS：稳定拓扑序策略，针对图里已有的算子，不会改变其计算顺序；针对图里新增的算子，使用RDFS遍历策略。 |

