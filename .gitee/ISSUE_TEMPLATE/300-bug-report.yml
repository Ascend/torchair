---
name: ğŸ› Bug report
description: å¦‚æœæ‚¨å‘ç°Bugï¼Œè¯·åœ¨æ­¤æäº¤é—®é¢˜ã€‚
title: "[Bug]: "
labels:
  - bug
body:
  - type: markdown
    attributes:
      value: >
        #### åœ¨æäº¤é—®é¢˜ä¹‹å‰ï¼Œè¯·é€šè¿‡[æœç´¢ç°æœ‰å’Œå†å²é—®é¢˜](https://gitcode.com/Ascend/torchair/issues)ç¡®ä¿è¯¥é—®é¢˜å°šæœªè¢«æå‡ºå¹¶è§£å†³ã€‚
  - type: textarea
    attributes:
      label: æ‚¨çš„ç¯å¢ƒä¿¡æ¯
      description: |
        è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯
      value: |
        ```text
        -- CANN ç‰ˆæœ¬ (e.g., CANN 3.0.xï¼Œ5.x.x):  
        -- Pytorch/Torch_npu ç‰ˆæœ¬ (e.g., v2.1.0, v2.6.0):
        -- Python ç‰ˆæœ¬ (e.g., Python 3.7.5):
        -- æ“ä½œç³»ç»Ÿç‰ˆæœ¬ (e.g., Ubuntu 18.04):
        ```
    validations:
      required: true
  - type: textarea
    attributes:
      label: ğŸ› è¯·æè¿°bug
      description: |
        è¯·æ¸…æ™°ç®€æ˜åœ°æè¿°Bugçš„å…·ä½“æƒ…å†µã€‚

        è‹¥ç›¸å…³ï¼Œè¯·æä¾›æœ€å°å¤ç°ç¤ºä¾‹ï¼Œä»¥ä¾¿æˆ‘ä»¬é€šè¿‡è¿è¡Œä»£ç é‡ç°é”™è¯¯ã€‚ä»£ç ç‰‡æ®µåŠ¡å¿…å°½å¯èƒ½ç²¾ç®€ï¼Œè¯·èŠ±æ—¶é—´åˆ å‡æ— å…³ä»£ç ï¼Œè¿™èƒ½å¸®åŠ©æˆ‘ä»¬é«˜æ•ˆè°ƒè¯•ã€‚

        æˆ‘ä»¬å°†ç›´æ¥å¤åˆ¶æ‚¨çš„ä»£ç ï¼Œå¹¶æœŸæœ›å¾—åˆ°ä¸æ‚¨ç›¸åŒçš„ç»“æœï¼šè¯·é¿å…ä½¿ç”¨å¤–éƒ¨æ•°æ®ï¼Œå¹¶åŒ…å«ç›¸å…³å¯¼å…¥è¯­å¥ç­‰ã€‚
        
        
        è¯·ç²˜è´´æˆ–æè¿°æ‚¨å®é™…è§‚å¯Ÿåˆ°çš„ç»“æœï¼ˆè€Œéé¢„æœŸç»“æœï¼‰ã€‚è‹¥å‡ºç°é”™è¯¯ï¼Œè¯·å®Œæ•´ç²˜è´´åŒ…å«å¼‚å¸¸å®Œæ•´å›æº¯çš„é”™è¯¯ä¿¡æ¯ã€‚å»ºè®®å°†é”™è¯¯ä¿¡æ¯åŒ…è£¹åœ¨ ```ä¸‰å¼•å·ä»£ç å—ä¸­ã€‚

        è¯·åœ¨ç¤ºä¾‹ä¸­[å¼€å¯pythonå±‚æ—¥å¿—](https://www.hiascend.com/document/detail/zh/Pytorch/710/modthirdparty/torchairuseguide/torchair_00008.html)

        æˆ–è€…è®¾ç½®ç¯å¢ƒå˜é‡[å¼€å¯c++å±‚æ—¥å¿—](https://www.hiascend.com/document/detail/zh/Pytorch/710/modthirdparty/torchairuseguide/torchair_00009.html)
        
        ä»¥å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼ŒååŠ©è°ƒè¯•æ½œåœ¨é—®é¢˜ã€‚


        è‹¥é‡åˆ°å´©æºƒæˆ–å¡æ­»é—®é¢˜ï¼Œè¯·æ£€æŸ¥æ—¥å¿—æ–‡ä»¶å¹¶æŒ‡å‡ºå…·ä½“å´©æºƒæˆ–å¡æ­»çš„å‡½æ•°ã€‚

      placeholder: |
        æ¸…æ™°ç®€æ˜åœ°æè¿°Bugçš„å…·ä½“æƒ…å†µã€‚

        ```python
        # æ‚¨çš„ä»£ç æ®µï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š
        import torch
        import torch_npu
        import torchair as tng

        class Model(torch.nn.Module):
        def __init__(self):
            super().__init__()
        
        def forward(self, x, y, z):
            return torch.add(x, y*z)

        model = Model()

        config = CompilerConfig()
        npu_backend = tng.get_npu_backend(compiler_config=config)
        torch.compile(model, backend=npu_backend)
        model = torch.compile(model, backend=npu_backend, dynamic=False)
        in1 = torch.randn(4, 1).float().npu()
        in2 = torch.randn(4, 4).float().npu()
        in3 = torch.randn(4, 4).int().npu()
        graph_result = model(in1, in2, in3)
        print(graph_result)
        ```  

        ```
        æ‚¨æ”¶åˆ°çš„é”™è¯¯æ¶ˆæ¯ï¼ŒåŒ…å«å®Œæ•´çš„å›æº¯ä¿¡æ¯ã€‚
        ```
    validations:
      required: true